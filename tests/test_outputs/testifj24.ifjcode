.IFJcode24
DEFVAR GF@$R0
DEFVAR GF@$F0
DEFVAR GF@$B0
DEFVAR GF@$S0
DEFVAR GF@$R1
DEFVAR GF@$R2
DEFVAR GF@$F1
DEFVAR GF@$F2
DEFVAR GF@$B1
DEFVAR GF@$B2
DEFVAR GF@$S1
DEFVAR GF@$S2
JUMP main
LABEL main
CREATEFRAME
PUSHFRAME
DEFVAR LF@viewportWidth
DEFVAR LF@viewportHeight
DEFVAR LF@sphereX
DEFVAR LF@sphereY
DEFVAR LF@sphereRadius
DEFVAR LF@lightX
DEFVAR LF@lightY
DEFVAR LF@y
DEFVAR LF@x
DEFVAR LF@rayX
DEFVAR LF@rayY
DEFVAR LF@dx
DEFVAR LF@dy
DEFVAR LF@distSq
DEFVAR LF@nx
DEFVAR LF@ny
DEFVAR LF@lx
DEFVAR LF@ly
DEFVAR LF@input
DEFVAR LF@lenL
DEFVAR LF@normLx
DEFVAR LF@normLy
DEFVAR LF@dot
MOVE LF@viewportWidth float@0x1.4p+4
MOVE LF@viewportHeight float@0x1.4p+3
MOVE LF@sphereX float@0x0p+0
MOVE LF@sphereY float@0x0p+0
MOVE LF@sphereRadius float@0x1.4p+2
MOVE LF@lightX float@0x1.4p+3
MOVE LF@lightY float@0x1.4p+3
PUSHS float@0x0p+0
PUSHS float@0x1p+0
SUBS
PUSHS float@0x1.4p+3
MULS
PUSHS float@0x1p+1
DIVS
POPS LF@y
CLEARS
LABEL $while0
PUSHS LF@y
PUSHS float@0x1.4p+3
PUSHS float@0x1p+1
DIVS
GTS
NOTS
POPS GF@$B0
CLEARS
JUMPIFEQ $endwhile0 GF@$B0 bool@false
PUSHS float@0x0p+0
PUSHS float@0x1p+0
SUBS
PUSHS float@0x1.4p+4
MULS
PUSHS float@0x1p+1
DIVS
POPS LF@x
CLEARS
LABEL $while1
PUSHS LF@x
PUSHS float@0x1.4p+4
PUSHS int@2
INT2FLOATS
DIVS
GTS
NOTS
POPS GF@$B0
CLEARS
JUMPIFEQ $endwhile1 GF@$B0 bool@false
PUSHS LF@x
PUSHS float@0x1p+0
MULS
POPS LF@rayX
CLEARS
PUSHS LF@y
PUSHS float@0x1p+0
MULS
POPS LF@rayY
CLEARS
PUSHS LF@rayX
PUSHS float@0x0p+0
SUBS
POPS LF@dx
CLEARS
PUSHS LF@rayY
PUSHS float@0x0p+0
SUBS
POPS LF@dy
CLEARS
PUSHS LF@dx
PUSHS LF@dx
MULS
PUSHS LF@dy
PUSHS LF@dy
MULS
ADDS
POPS LF@distSq
CLEARS
LABEL $if0
PUSHS LF@distSq
PUSHS float@0x1.4p+2
PUSHS float@0x1.4p+2
MULS
GTS
NOTS
POPS GF@$B0
CLEARS
JUMPIFEQ $else0 GF@$B0 bool@false
PUSHS LF@dx
PUSHS float@0x1.4p+2
DIVS
POPS LF@nx
CLEARS
PUSHS LF@dy
PUSHS float@0x1.4p+2
DIVS
POPS LF@ny
CLEARS
PUSHS float@0x1.4p+3
PUSHS LF@rayX
SUBS
POPS LF@lx
CLEARS
PUSHS float@0x1.4p+3
PUSHS LF@rayY
SUBS
POPS LF@ly
CLEARS
PUSHS LF@lx
PUSHS LF@lx
MULS
PUSHS LF@ly
PUSHS LF@ly
MULS
ADDS
POPS LF@input
CLEARS
CREATEFRAME
DEFVAR TF@PARAM0
MOVE TF@PARAM0 LF@input
CALL sqrt
POPS LF@lenL
CLEARS
LABEL $if1
PUSHS LF@lenL
PUSHS int@0
INT2FLOATS
GTS
POPS GF@$B0
CLEARS
JUMPIFEQ $else1 GF@$B0 bool@false
PUSHS LF@lx
PUSHS LF@lenL
DIVS
POPS LF@normLx
CLEARS
PUSHS LF@ly
PUSHS LF@lenL
DIVS
POPS LF@normLy
CLEARS
PUSHS LF@nx
PUSHS LF@normLx
MULS
PUSHS LF@ny
PUSHS LF@normLy
MULS
ADDS
POPS LF@dot
CLEARS
LABEL $if2
PUSHS LF@dot
PUSHS int@0
INT2FLOATS
GTS
POPS GF@$B0
CLEARS
JUMPIFEQ $else2 GF@$B0 bool@false
WRITE string@*
JUMP $endif2
LABEL $else2
WRITE string@.
LABEL $endif2
JUMP $endif1
LABEL $else1
WRITE string@.
LABEL $endif1
JUMP $endif0
LABEL $else0
WRITE string@\032
LABEL $endif0
PUSHS LF@x
PUSHS int@1
INT2FLOATS
ADDS
POPS LF@x
CLEARS
JUMP $while1
LABEL $endwhile1
WRITE string@\010
PUSHS LF@y
PUSHS int@1
INT2FLOATS
ADDS
POPS LF@y
CLEARS
JUMP $while0
LABEL $endwhile0
WRITE string@Raytracing\032complete.\010
EXIT int@0
LABEL sqrt
PUSHFRAME
DEFVAR LF@guess
DEFVAR LF@tolerance
DEFVAR LF@x
MOVE LF@x LF@PARAM0
PUSHS LF@x
PUSHS float@0x1p+1
DIVS
POPS LF@guess
CLEARS
MOVE LF@tolerance float@0x1.0c6f7a0b5ed8dp-20
LABEL $while2
PUSHS LF@guess
PUSHS LF@guess
MULS
PUSHS LF@x
PUSHS float@0x1.0c6f7a0b5ed8dp-20
ADDS
GTS
POPS GF@$B0
CLEARS
JUMPIFEQ $endwhile2 GF@$B0 bool@false
PUSHS LF@guess
PUSHS LF@x
PUSHS LF@guess
DIVS
ADDS
PUSHS float@0x1p+1
DIVS
POPS LF@guess
CLEARS
JUMP $while2
LABEL $endwhile2
PUSHS LF@guess
POPFRAME
RETURN
